{% extends "layout.html" %}
{% block content %}

    <article class="media content-section" style="margin-top: 1.5rem;">
        <div class="media-body">
            <div class="article-metadata">
                <h2 class="article-title">Bill ID: {{ bill.id }}</h2>
                <a class="mr-2" href="{{ url_for('all_bills') }}">View all bills</a>
            </div>
            <div class="article-footer">
                <p class="article-content">Name: <b>{{ bill.name }}</b></p>
                <p class="article-content">Email: <b>{{ bill.email }}</b></p>
                <p class="article-content">Number: <b>{{ bill.phonenumber }}</b></p>
                
                <table class="table table-striped table-dark py-5 bg-dark">
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">MRP</th>
                            <th scope="col">Quantity</th>
                            <th scope="col">Disc</th>
                            <th scope="col">Total</th>
                        </tr>
                    </thead>
                    
                    <tbody>
                        {% for product in products %}
                        <tr>
                            <td> {{product[0].name}}</td>
                            <td> ₹ {{'%0.2f'| format(product[0].price|float)}}</td>
                            <td> {{product[1]}}</td>
                            <td> {{'%0.2f'| format(product[0].discount|float)}} %</td>
                            <td> {{ '%0.2f'| format(product[1]*product[0].price*(1-product[0].discount*0.01)|float) }}</td>
                        </tr>
                        {% endfor %}
                        <tr>
                            <td> TOTAL</td>
                            <td> ₹ {{'%0.2f'| format(final_item_price|float)}}</td>
                            <td> {{final_quantity}} </td>
                            <td> {{'%0.2f'| format(final_discount|float)}} %</td>
                            <td> {{'%0.2f'| format(final_total|float)}}</td>
                        </tr>
                    </tbody>
                </table>                
            
            </div>
        </div>
    </article>

{% endblock content %}


